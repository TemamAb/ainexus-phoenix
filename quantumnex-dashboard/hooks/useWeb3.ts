import { useState, useCallback } from 'react'\nimport { ethers } from 'ethers'\n\nexport default function useWeb3() {\n  const [provider, setProvider] = useState<ethers.providers.Web3Provider | null>(null)\n  const [address, setAddress] = useState<string | null>(null)\n\n  const connect = useCallback(async () => {\n    if ((window as any).ethereum) {\n      const p = new ethers.BrowserProvider((window as any).ethereum)\n      try {\n        await (window as any).ethereum.request({ method: 'eth_requestAccounts' })\n        setProvider(p as any)\n        const signer = await p.getSigner()\n        const a = await signer.getAddress()\n        setAddress(a)\n      } catch (e) {\n        console.error('wallet connect error', e)\n      }\n    } else {\n      console.warn('No injected wallet')\n    }\n  }, [])\n\n  const disconnect = useCallback(() => {\n    setProvider(null)\n    setAddress(null)\n  }, [])\n\n  return { provider, address, connect, disconnect }\n}